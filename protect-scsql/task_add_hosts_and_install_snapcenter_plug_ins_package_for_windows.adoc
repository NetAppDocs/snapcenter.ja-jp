---
permalink: protect-scsql/task_add_hosts_and_install_snapcenter_plug_ins_package_for_windows.html 
sidebar: sidebar 
keywords: credentials 
summary: ホストの追加とプラグインパッケージのインストールには、 SnapCenterAdd Host ページを使用する必要があります。プラグインはリモートホストに自動的にインストールされます。 
---
= ホストを追加してSnapCenter Plug-ins Package for Windowsをインストールする
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ホストの追加およびプラグインパッケージのインストールには、 SnapCenter * ホストの追加ページを使用する必要があります。プラグインはリモートホストに自動的にインストールされます。

.開始する前に
* SnapCenter ServerホストのオペレーティングシステムがWindows 2019で、プラグインホストのオペレーティングシステムがWindows 2022の場合は、次の手順を実行する必要があります。
+
** Windows Server 2019（OSビルド17763.5936）以降にアップグレードする
** Windows Server 2022（OSビルド20348.2402）以降にアップグレードする


* SnapCenter Admin ロールなど、プラグインのインストールとアンインストールの権限のあるロールが割り当てられているユーザが必要です。
* 組み込みでないクレデンシャルを指定してWindowsホストにプラグインをインストールする場合は、ホストのUACを無効にする必要があります。
* メッセージキューサービスがrunning状態であることを確認する必要があります。
* グループ管理サービスアカウント（gMSA）を使用する場合は、管理Privilegesを使用してgMSAを設定する必要があります。
+
link:task_configure_gMSA_on_windows_server_2012_or_later.html["Windows Server 2016 以降で SQL 用のグループマネージドサービスアカウントを設定します"^]



.タスクの内容
SnapCenterサーバをプラグインホストとして別のSnapCenterサーバに追加することはできません。

ホストの追加とプラグインパッケージのインストールは、ホストごとまたはクラスタごとに実行できます。クラスタまたはWindows Server Failover Clustering（WSFC）にプラグインをインストールする場合、プラグインはクラスタのすべてのノードにインストールされます。

ホストの管理については、を参照してください link:../admin/concept_manage_hosts.html["ホストの管理"^]。

.手順
. 左側のナビゲーションペインで、 *Hosts* を選択します。
. 上部で [Managed Hosts] タブが選択されていることを確認します。
. 「 * 追加」を選択します。
. [Hosts]ページで、次の手順を実行します。
+
|===
| フィールド | 操作 


 a| 
ホストタイプ
 a| 
ホストタイプとして[Windows]を選択します。SnapCenter サーバによってホストが追加され、ホストに Plug-in for Windows がインストールされていない場合はインストールされます。

[Plug-ins]ページで[Microsoft SQL Server]オプションを選択すると、SnapCenter ServerによってPlug-in for SQL Serverがインストールされます。



 a| 
ホスト名
 a| 
ホストの完全修飾ドメイン名（FQDN）またはIPアドレスを入力します。信頼されていないドメインホストのIPアドレスは、FQDNに解決される場合にのみサポートされます。

SnapCenterは、DNSが適切に設定されているかどうかによって異なります。そのため、FQDNを入力することを推奨します。

次のいずれかのIPアドレスまたはFQDNを入力できます。

** スタンドアロンホスト
** WSFC SnapCenter を使用してホストを追加するときに、ホストがサブドメインの一部である場合は、 FQDN を指定する必要があります。




 a| 
クレデンシャル
 a| 
作成したクレデンシャルの名前を選択するか、新しいクレデンシャルを作成します。このクレデンシャルには、リモートホストに対する管理者権限が必要です。詳細については、クレデンシャルの作成に関する情報を参照してください。

指定したクレデンシャルの名前にカーソルを合わせると、クレデンシャルの詳細を確認できます。


NOTE: クレデンシャルの認証モードは、ホスト追加ウィザードで指定するホストタイプによって決まります。

|===
. [ インストールするプラグインを選択してください * ] セクションで、インストールするプラグインを選択します。
. [ * その他のオプション * ] を選択します。
+
|===
| フィールド | 操作 


 a| 
ポート
 a| 
デフォルトのポート番号をそのまま使用するか、ポート番号を指定します。デフォルトのポート番号は8145です。SnapCenter サーバがカスタムポートにインストールされている場合は、そのポート番号がデフォルトポートとして表示されます。


NOTE: プラグインを手動でインストールし、カスタムポートを指定した場合は、同じポートを指定する必要があります。そうしないと、処理は失敗します。



 a| 
インストールパス
 a| 
デフォルトのパスはC：\Program Files\NetApp\SnapCenterです。必要に応じてパスをカスタマイズできます。



 a| 
クラスタ内のすべてのホストを追加
 a| 
WSFCまたはSQL可用性グループ内のすべてのクラスタノードを追加するには、このチェックボックスをオンにします。クラスタ内で使用可能な複数のSQL可用性グループを管理および識別する場合は、GUIで該当するクラスタのチェックボックスを選択して、すべてのクラスタノードを追加する必要があります。



 a| 
インストール前チェックをスキップ
 a| 
プラグインを手動でインストール済みで、プラグインをインストールするための要件をホストが満たしているかどうかを検証しない場合は、このチェックボックスを選択します。



 a| 
グループ管理サービスアカウント（gMSA）を使用してプラグインサービスを実行
 a| 
グループ管理サービスアカウント（gMSA）を使用してプラグインサービスを実行する場合は、このチェックボックスを選択します。

gMSA名をdomainName\accountName$の形式で指定してください。


NOTE: ホストにgMSAを追加し、gMSAにログインしてsys admin Privilegesがある場合、gMSAはSQLインスタンスへの接続に使用されます。

|===
. [ 送信 ] を選択します。
. SQL Plug-inの場合は、ログディレクトリを設定するホストを選択します。
+
.. [ログディレクトリの設定]*を選択し、[ホストログディレクトリの設定]ページで*[参照]*を選択して、次の手順を実行します。
+
ネットアップ LUN （ドライブ）のみが選択対象として表示されます。SnapCenter は、バックアップ処理の一環として、ホストログディレクトリをバックアップしてレプリケートします。

+
image::../media/host_managed_hosts_configureplugin.gif[プラグインページの設定]

+
... ホストログを格納するホスト上のドライブレターまたはマウントポイントを選択します。
... 必要に応じてサブディレクトリを選択します。
... [ 保存（ Save ） ] を選択します。




. [ 送信 ] を選択します。
+
[インストール前チェックをスキップ]*チェックボックスを選択していない場合は、プラグインをインストールするための要件を満たしているかどうかが検証されます。 ディスクスペース、RAM、PowerShellのバージョン、 NETバージョン、場所（Windowsプラグインの場合）、およびJavaバージョン（Linuxプラグインの場合）が最小要件に照らして検証されます。最小要件を満たしていない場合は、該当するエラーまたは警告メッセージが表示されます。

+
エラーがディスクスペースまたはRAMに関連している場合は、C：\Program Files\NetApp\SnapCenter WebAppにあるweb.configファイルを更新してデフォルト値を変更できます。エラーが他のパラメータに関連している場合は、問題を修正する必要があります。

+

NOTE: HAセットアップでweb.configファイルを更新する場合は、両方のノードでファイルを更新する必要があります。

. インストールの進行状況を監視します。

