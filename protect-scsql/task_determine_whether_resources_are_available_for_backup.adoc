---
permalink: protect-scsql/task_determine_whether_resources_are_available_for_backup.html 
sidebar: sidebar 
keywords: credentials 
summary: リソースとは、インストールしたプラグインで管理されるデータベース、アプリケーションインスタンス、可用性グループなどのコンポーネントのことです。リソースをリソースグループに追加することでデータ保護ジョブを実行できますが、その前に利用可能なリソースを特定しておく必要があります。使用可能なリソースを確認することで、プラグインのインストールが正常に完了したことの確認にもなります。 
---
= バックアップに使用できるリソースがあるかどうかを確認する
:icons: font
:imagesdir: ../media/


[role="lead"]
リソースとは、インストールしたプラグインで管理されるデータベース、アプリケーションインスタンス、可用性グループなどのコンポーネントのことです。リソースをリソースグループに追加することでデータ保護ジョブを実行できますが、その前に利用可能なリソースを特定しておく必要があります。使用可能なリソースを確認することで、プラグインのインストールが正常に完了したことの確認にもなります。

* 必要なもの *

* SnapCenter サーバのインストール、ホストの追加、ストレージシステム接続の作成、クレデンシャルの追加などのタスクを完了しておく必要があります。
* Microsoft SQL データベースを検出するには、次のいずれかの条件を満たしている必要があります。
+
** SnapCenter サーバにプラグインホストを追加したユーザには、 Microsoft SQL Server に対して必要な権限（ sysadmin ）が割り当てられている必要があります。
** 上記の条件を満たしていない場合は、 SnapCenter サーバで、 Microsoft SQL Server に対して必要な権限（ sysadmin ）を持つユーザを設定する必要があります。ユーザは Microsoft SQL Server インスタンスレベルで設定する必要があり、ユーザは SQL または Windows ユーザに設定できます。


* Windows クラスタで Microsoft SQL データベースを検出するには、フェイルオーバークラスタインスタンス（ FCI ）の TCP / IP ポートのブロックを解除する必要があります。
* データベースが VMware RDM LUN または VMDK にある場合は、 SnapCenter Plug-in for VMware vSphere を導入し、 SnapCenter に登録する必要があります。
+
詳細については、を参照してください https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/scpivs44_deploy_snapcenter_plug-in_for_vmware_vsphere.html["SnapCenter Plug-in for VMware vSphere を導入"^]

* ホストを gMSA とともに追加し 'gMSA にログイン権限とシステム管理権限がある場合 'gMSA を使用して SQL インスタンスに接続します


* このタスクについて *

[ 詳細 * ] ページの [ 全体のステータス * ] オプションが [ バックアップに使用できない ] に設定されている場合は、データベースをバックアップできません。次のいずれかに該当する場合、 * Overall Status * オプションはバックアップに使用できない状態に設定されます。

* データベースが NetApp LUN 上にない。
* データベースが正常な状態でない。
+
データベースがオフライン、リストア中、リカバリの保留中、サスペクトなどの状態です。

* データベースに必要な権限がありません。
+
たとえば、ユーザにデータベースへの表示アクセス権しかない場合、データベースのファイルとプロパティを識別できないため、バックアップすることはできません。




NOTE: SnapCenter でバックアップできるのは、 SQL Server Standard Edition で可用性グループを設定している場合のみです。

* 手順 *

. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. リソースページで、 * View * ドロップダウン・リストから * Database * 、 * Instance * 、または * Availability Group * を選択します。
+
をクリックします image:../media/filter_icon.gif[""] をクリックし、ホスト名と SQL Server インスタンスを選択してリソースをフィルタリングします。をクリックします image:../media/filter_icon.gif[""] をクリックしてフィルタペインを閉じます。

. [ リソースの更新 ] をクリックします。
+
新しく追加、名前変更、または削除されたリソースは、 SnapCenter サーバインベントリに更新されます。



リソースは、リソースタイプ、ホストまたはクラスタ名、関連するリソースグループ、バックアップタイプ、ポリシー、全体的なステータスなどの情報とともに表示されます。

* データベースがネットアップ以外のストレージ上にある場合、「 Not Available for backup 」が「 Overall Status * 」列に表示されます。
+
ネットアップ以外のストレージにあるデータベースには、データ保護処理を実行できません。

* データベースが NetApp ストレージ上にあり ' かつ保護されていない場合 ' Not protected は *Overall Status* 列に表示されます
* データベースが NetApp ストレージ・システム上にあり ' 保護されている場合 ' ユーザー・インタフェースの [ 全般的なステータス *] 列に [ バックアップは実行されません ] というメッセージが表示されます
* データベースが NetApp ストレージ・システム上にあり ' 保護されている場合 ' データベースのバックアップがトリガされると ' ユーザー・インタフェースの [ バックアップに成功しました ] というメッセージが [ 全般的なステータス ] 列に表示されます



NOTE: クレデンシャルの設定時に SQL 認証を有効にしている場合は、検出されたインスタンスまたはデータベースに赤い鍵のアイコンが表示されます。鍵のアイコンが表示された場合、リソースグループに追加するインスタンスまたはデータベースのクレデンシャルを指定する必要があります。

SnapCenter 管理者がリソースを RBAC ユーザに割り当てたら、 RBAC ユーザはログインし、 [* リソースの更新 * ] をクリックして、リソースの最新の * 全体的なステータス * を確認する必要があります。
