---
permalink: protect-scsql/task_determine_whether_resources_are_available_for_backup.html 
sidebar: sidebar 
keywords: credentials 
summary: リソースとは、インストールしたプラグインで管理されるデータベース、アプリケーションインスタンス、可用性グループなどのコンポーネントです。これらのリソースをリソースグループに追加してデータ保護ジョブを実行できますが、その前に使用可能なリソースを特定しておく必要があります。使用可能なリソースを確認することで、プラグインのインストールが正常に完了したことの確認にもなります。 
---
= リソースをバックアップに使用できるかどうかの確認
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
リソースとは、インストールしたプラグインで管理されるデータベース、アプリケーションインスタンス、可用性グループなどのコンポーネントです。これらのリソースをリソースグループに追加してデータ保護ジョブを実行できますが、その前に使用可能なリソースを特定しておく必要があります。使用可能なリソースを確認することで、プラグインのインストールが正常に完了したことの確認にもなります。

.開始する前に
* SnapCenterサーバのインストール、ホストの追加、ストレージシステム接続の作成、クレデンシャルの追加などのタスクを完了しておく必要があります。
* Microsoft SQLデータベースを検出するには、次のいずれかの条件を満たしている必要があります。
+
** SnapCenter サーバにプラグインホストを追加したユーザには、 Microsoft SQL Server に対して必要な権限（ sysadmin ）が割り当てられている必要があります。
** 上記の条件を満たしていない場合は、 SnapCenter サーバで、 Microsoft SQL Server に対して必要な権限（ sysadmin ）を持つユーザを設定する必要があります。ユーザはMicrosoft SQL Serverインスタンスレベルで設定する必要があります。ユーザはSQLユーザまたはWindowsユーザです。


* Windowsクラスタ内のMicrosoft SQLデータベースを検出するには、フェイルオーバークラスタインスタンス（FCI）TCP / IPポートのブロックを解除する必要があります。
* データベースがVMware RDM LUNまたはVMDK上にある場合は、SnapCenter Plug-in for VMware vSphereを導入してSnapCenterに登録する必要があります。
+
詳細については、を参照してください。 https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/scpivs44_deploy_snapcenter_plug-in_for_vmware_vsphere.html["SnapCenter Plug-in for VMware vSphereの導入"^]

* ホストにgMSAを追加し、gMSAにログインしてシステム管理Privilegesがある場合は、gMSAを使用してSQLインスタンスに接続されます。


.タスクの内容
[ 詳細 ] ページの [ 全体のステータス *] オプションが [ バックアップに使用できない ] に設定されている場合は、データベースをバックアップできません。次のいずれかに該当する場合、 * Overall Status * オプションはバックアップに使用できない状態に設定されます。

* データベースが NetApp LUN 上にない。
* データベースが正常な状態でない。
+
データベースがオフライン、リストア中、リカバリの保留中、サスペクトなどの状態です。

* データベースに十分な権限がありません。
+
たとえば、ユーザにデータベースへの表示アクセス権しかない場合、データベースのファイルとプロパティを特定できないため、バックアップすることはできません。




NOTE: SQL Server Standard Editionで可用性グループが設定されている場合、SnapCenterでバックアップできるのはプライマリデータベースのみです。

.手順
. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. リソースページで、 * View * ドロップダウン・リストから * Database * 、 * Instance * 、または * Availability Group * を選択します。
+
をクリックし、ホスト名とSQL Serverインスタンスを選択してリソースをフィルタリングします。そのあとにimage:../media/filter_icon.png["フィルタアイコン"]をクリックすると、フィルタ ペインが閉じます。

. [ リソースの更新 ] をクリックします。
+
新しく追加、名前変更、または削除されたリソースは、SnapCenterサーバインベントリに更新されます。

+

IMPORTANT: SnapCenter以外でデータベースの名前が変更された場合は、リソースを更新する必要があります。

+
リソースは、リソースタイプ、ホストまたはクラスタ名、関連するリソースグループ、バックアップタイプ、ポリシー、全体的なステータスなどの情報とともに表示されます。

+
** データベースがNetApp以外のストレージにある場合は、 `Not available for backup` *[全体のステータス]*列にと表示されます。
+
NetApp以外のストレージにあるデータベースに対しては、データ保護処理を実行できません。

** データベースがNetAppストレージにあり、保護されていない場合は、 `Not protected` *[全体のステータス]*列にと表示されます。
** データベースがNetAppストレージシステム上にあり、保護されている場合は、ユーザインターフェイスの*[全体のステータス]*列にメッセージが表示されます `Backup not run` 。
** データベースがNetAppストレージシステム上にあり、保護されている場合に、そのデータベースのバックアップがトリガーされると、ユーザインターフェイスの* Overall Status *列にメッセージが表示されます `Backup succeeded` 。





NOTE: クレデンシャルの設定時にSQL認証を有効にした場合は、検出されたインスタンスまたはデータベースに赤い鍵のアイコンが表示されます。南京錠のアイコンが表示された場合は、リソースグループに追加するインスタンスまたはデータベースのクレデンシャルを指定する必要があります。

. SnapCenter 管理者がリソースを RBAC ユーザに割り当てたら、 RBAC ユーザはログインし、 [* リソースの更新 * ] をクリックして、リソースの最新の * 全体的なステータス * を確認する必要があります。

