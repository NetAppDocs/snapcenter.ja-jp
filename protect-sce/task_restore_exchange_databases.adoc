---
permalink: protect-sce/task_restore_exchange_databases.html 
sidebar: sidebar 
keywords:  
summary: SnapCenter を使用して、バックアップされた Exchange データベースをリストアできます。 
---
= Exchange データベースをリストアします
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenter を使用して、バックアップされた Exchange データベースをリストアできます。

* 必要なもの *

* リソースグループ、データベース、または Database Availability Group （ DAG ；データベース可用性グループ）をバックアップしておく必要があります。
* Exchange データベースを別の場所に移動した場合、古いバックアップのリストア処理は実行できません。
* Snapshot コピーをミラーまたはバックアップにレプリケートするユーザには、 SnapCenter 管理者がユーザに対してソースとデスティネーションの両方のボリューム用に SVM を割り当てる必要があります。
* DAG では、ネットアップ以外のストレージにアクティブなデータベースコピーがあり、ネットアップストレージにあるデータベースのパッシブコピーバックアップからリストアする場合、パッシブコピー（ネットアップストレージ）をアクティブコピーとして作成し、リソースを更新してリストア処理を実行します。
+
パッシブデータベースコピーをアクティブデータベースコピーとして作成するには、「 Move-ActiveMailboxDatabase 」コマンドを実行します。

+
。 https://docs.microsoft.com/en-us/powershell/module/exchange/move-activemailboxdatabase?view=exchange-ps["Microsoft のドキュメント"^] に、このコマンドに関する情報を示します。



* このタスクについて *

* データベースに対してリストア処理を実行すると、データベースは同じホストにマウントされ、新しいボリュームは作成されません。
* DAG レベルのバックアップは、個々のデータベースからリストアする必要があります。
* Exchange データベース（ .edb ）ファイル以外のファイルが存在する場合は、フルディスクリストアはサポートされません。
+
Plug-in for Exchange は、レプリケーションに使用されるなどの Exchange ファイルがディスクに格納されている場合、ディスク上でフルリストアを実行しません。フルリストアが Exchange の機能に影響を与える可能性がある場合、 Plug-in for Exchange は単一ファイルのリストア処理を実行します。

* Plug-in for Exchange では、 BitLocker 暗号化ドライブをリストアできません。


* 手順 *

. 左側のナビゲーションペインで、リソースページの左上にある * リソース * をクリックします。
. ドロップダウン・リストから Exchange Server プラグインを選択します。
. [ リソース ] ページで、 [ 表示 ] リストから [* データベース *] を選択します。
. リストからデータベースを選択します。
. [ コピーの管理 ] ビューで、 [ プライマリ・バックアップ ] テーブルから [* バックアップ ] を選択し、 [*] をクリックしますimage:../media/restore_icon.gif["リストアアイコン"]*
. [ オプション ] ページで、次のいずれかのログバックアップオプションを選択します。
+
|===
| オプション | 説明 


 a| 
すべてのログバックアップ
 a| 
フルバックアップ後に使用可能なすべてのログバックアップをリストアするには、「 * All log backups * 」を選択して最新の状態へのバックアップリストア処理を実行します。



 a| 
までログバックアップでバックアップします
 a| 
「 * までログバックアップ」を選択してポイントインタイムリストア処理を実行します。このリストア処理では、選択したログまでのログバックアップに基づいてデータベースがリストアされます。


NOTE: ドロップダウンリストに表示されるログ数は UTM に基づいています。たとえば、フルバックアップ保持が 5 で UTM 保持が 3 の場合、使用可能なログバックアップの数は 5 ですが、ドロップダウンにはリストア処理を実行するログが 3 つしか表示されません。



 a| 
期限までの特定の日付
 a| 
リストアしたデータベースにトランザクション・ログを適用する日時を指定するには、 [ 指定の期限まで * ] を選択します。このポイントインタイムリストア処理では、指定した日時の最後のバックアップまでに記録されたトランザクションログエントリがリストアされます。



 a| 
なし
 a| 
ログ・バックアップを行わずにフル・バックアップのみをリストアする必要がある場合は、「 * なし」を選択します。

|===
+
次のいずれかを実行できます。

+
** * リストア後にデータベースをリカバリしてマウント * - このオプションはデフォルトで選択されています。
** * リストア前にバックアップ内のトランザクション・ログの整合性を検証しない * - デフォルトでは、 SnapCenter はリストア処理を実行する前にバックアップ内のトランザクション・ログの整合性を検証します。
+
|===


| * ベストプラクティス： * このオプションは選択しないでください。 
|===


. スクリプトページで、リストア処理の前後に実行するプリスクリプトまたはポストスクリプトのパスと引数を入力します。
+
リストアプリスクリプトの引数には、 $Database と $ServerInstance が含まれています。

+
リストアポストスクリプトの引数には、 $Database 、 $ServerInstance 、 $BackupName 、 $LogDirectory 、および $TargetServerInstance があります。

+
SNMP トラップの更新、アラートの自動化、ログの送信などをスクリプトで実行できます。

. [ 通知 ] ページの [ 電子メールの設定 *] ドロップダウンリストから、電子メールを送信するシナリオを選択します。
+
また、送信者と受信者の E メールアドレス、および E メールの件名を指定する必要があります。

. 概要を確認し、 [ 完了 ] をクリックします。
. リストア・ジョブのステータスを表示するには、ページ下部の ［ アクティビティ ］ パネルを展開します。
+
リストア・プロセスを監視するには、 * Monitor * > * Jobs * ページを使用します。



アクティブデータベースをバックアップからリストアすると、レプリカとアクティブデータベースの間に遅延が発生した場合に、パッシブデータベースが中断状態または障害状態になることがあります。

状態の変更は、アクティブデータベースのログチェーンがフォークし、レプリケーションを中断する新しいブランチを開始すると発生します。Exchange Server はレプリカの修正を試みますが、修正できない場合は、リストア後に新しいバックアップを作成し、レプリカを再シードする必要があります。
