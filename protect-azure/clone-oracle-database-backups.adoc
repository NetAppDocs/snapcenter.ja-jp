---
permalink: protect-azure/clone-oracle-database-backups.html 
sidebar: sidebar 
keywords: SnapCenter Plug-in for Oracle Database, clone, database, backups. split clone, pluggable database 
summary: SnapCenter を使用してバックアップをクローニングすることができます。 
---
= Oracleデータベースバックアップのクローニング
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenterを使用すると、データベースのバックアップを使用してOracleデータベースをクローニングできます。

.手順
. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. [リソース]ページで、[表示]リストから*[データベース]*または*[リソースグループ]*を選択します。
. データベースを選択します。
. [Manage Copies]ビューページで、プライマリストレージシステムのバックアップを選択します。
. データバックアップを選択し、**をクリックしますimage:../media/clone_icon.gif["クローンアイコン"]。
. [Name]ページで、データベース（CDBまたは非CDB）をクローニングするか、プラガブルデータベース（PDB）をクローニングするかを選択します。
. [Locations]ページで、必要な詳細を指定します。
+
OracleデータベースANFボリュームが手動のQoS容量プールに設定されている場合は、クローンボリュームのQoSを指定します。

+
クローンボリュームにQoSが指定されていない場合は、ソースボリュームのQoSが使用されます。自動QoS容量プールを使用している場合、指定したQoS値は無視されます。

. [Credentials]ページで、次のいずれかを実行します。
+
.. [Credential name for sys user]で、クローンデータベースのsysユーザパスワードの定義に使用するクレデンシャルを選択します。
.. クローンホスト上のASMインスタンスへの接続に対してOS認証が有効になっている場合は、ASMインスタンスのクレデンシャル名で*なし*を選択します。
+
それ以外の場合は、「sys」ユーザまたはクローンホストに適用できる「SYSASM」権限を持つユーザが設定されたOracle ASMクレデンシャルを選択します。



. [Pre-Ops]ページでプリスクリプトのパスと引数を指定し、[Database parameter settings]セクションで、データベースの初期化に使用される事前入力済みのデータベースパラメータの値を変更します。
. クローンデータベースのリカバリを実行する場合は、[Post-Ops]ページで、*[Recover database]*と*[Until Cancel]*がデフォルトで選択されます。
+
.. [Until Cancel]*を選択すると、SnapCenterは、クローニング対象として選択されたデータバックアップのあとに、破損していない一連のアーカイブログを含む最新のログバックアップをマウントすることでリカバリを実行します。
.. [日付と時刻]*を選択すると、SnapCenterは指定した日時までデータベースをリカバリします。
.. [Until SCN]*を選択すると、SnapCenterは指定したSCNまでデータベースをリカバリします。
.. [外部アーカイブログの場所を指定する]*を選択すると、SnapCenterは指定したSCNまたは選択した日時に基づいて、最適な数のログバックアップを特定してマウントします。
.. デフォルトでは、クローンデータベースにソースデータベースと区別する一意の番号（DBID）を生成する場合は、*[Create new DBID]*チェックボックスが選択されています。
+
ソースデータベースのDBIDをクローンデータベースに割り当てる場合は、チェックボックスをオフにします。このシナリオでは、ソースデータベースがすでに登録されている外部のRMANカタログにクローンデータベースを登録すると、処理は失敗します。

.. クローンデータベースのデフォルトの一時表領域用の一時ファイルを作成する場合は、*[一時表領域用の一時ファイルを作成する]*チェックボックスを選択します。
.. [クローンの作成時に適用するSQLエントリを入力してください]*に、クローン作成時に適用するSQLエントリを追加します。
.. [クローン処理後に実行するスクリプトの入力]*で、クローン処理のあとに実行するポストスクリプトのパスと引数を指定します。


. [ 通知 ] ページの [ 電子メールの設定 *] ドロップダウンリストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、*[終了]*を選択します。
. 処理の進捗状況を監視するために、*[監視]*>*[ジョブ]*を選択します。




== プラガブルデータベースのクローニング

プラガブルデータベース（PDB）は、同じホストまたは代替ホスト上の別のターゲットCDBまたは同じターゲットCDBにクローニングできます。クローニングされたPDBを目的のSCNまたは日時にリカバリすることもできます。

.手順
. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. [リソース]ページで、[表示]リストから*[データベース]*または*[リソースグループ]*を選択します。
. タイプが単一インスタンス（マルチテナント）のデータベースを選択します。
. [Manage Copies]ビューページで、プライマリストレージシステムのバックアップを選択します。
. バックアップを選択し、**をクリックしますimage:../media/clone_icon.gif["クローンアイコン"]。
. [名前]ページで*[PDBクローン]*を選択し、その他の詳細を指定します。
. [Locations]ページで、必要な詳細を指定します。
. [Pre-Ops]ページでプリスクリプトのパスと引数を指定し、[Database parameter settings]セクションで、データベースの初期化に使用される事前入力済みのデータベースパラメータの値を変更します。
. [Post-Ops]ページでは、クローンデータベースのリカバリが実行される場合、デフォルトで*[Until Cancel]*が選択されます。
+
.. [Until Cancel]*を選択すると、SnapCenterは、クローニング対象として選択されたデータバックアップのあとに、破損していない一連のアーカイブログを含む最新のログバックアップをマウントすることでリカバリを実行します。
.. [日付と時刻]*を選択すると、SnapCenterは指定した日時までデータベースをリカバリします。
.. [外部アーカイブログの場所を指定する]*を選択すると、SnapCenterは指定したSCNまたは選択した日時に基づいて、最適な数のログバックアップを特定してマウントします。
.. デフォルトでは、クローンデータベースにソースデータベースと区別する一意の番号（DBID）を生成する場合は、*[Create new DBID]*チェックボックスが選択されています。
+
ソースデータベースのDBIDをクローンデータベースに割り当てる場合は、チェックボックスをオフにします。このシナリオでは、ソースデータベースがすでに登録されている外部のRMANカタログにクローンデータベースを登録すると、処理は失敗します。

.. クローンデータベースのデフォルトの一時表領域用の一時ファイルを作成する場合は、*[一時表領域用の一時ファイルを作成する]*チェックボックスを選択します。
.. [クローンの作成時に適用するSQLエントリを入力してください]*に、クローン作成時に適用するSQLエントリを追加します。
.. [クローン処理後に実行するスクリプトの入力]*で、クローン処理のあとに実行するポストスクリプトのパスと引数を指定します。


. [ 通知 ] ページの [ 電子メールの設定 *] ドロップダウンリストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、*[終了]*を選択します。
. 処理の進捗状況を監視するために、*[監視]*>*[ジョブ]*を選択します。




== Oracleデータベースのクローンをスプリットする

SnapCenterを使用して、クローンリソースを親リソースからスプリットできます。スプリットされたクローンは親リソースから独立します。

.手順
. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. [ リソース ] ページで、 [ 表示 ] リストから [ * データベース * ] を選択します。
. クローンリソース（データベースやLUNなど）を選択し、**をクリックしますimage:../media/clone_icon.gif["クローンアイコン"]。
. スプリットするクローンの推定サイズとアグリゲートで使用可能なスペースを確認し、 * Start * をクリックします。
. 操作の進行状況を監視するには、 * Monitor * > * Jobs * をクリックします。




== プラガブルデータベースのスプリットクローン

SnapCenterを使用して、プラガブルデータベース（PDB）のクローンをスプリットできます。

.手順
. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. リソースビューまたはリソースグループビューからソースコンテナデータベース（CDB）を選択します。
. [Manage Copies]ビューで、プライマリストレージシステムから*[Clones]*を選択します。
. PDBクローン（targetCDB：PDBClone）を選択し、**をクリックしますimage:../media/clone_icon.gif["クローンアイコン"]。
. スプリットするクローンの推定サイズとアグリゲートで使用可能なスペースを確認し、 * Start * をクリックします。
. 操作の進行状況を監視するには、 * Monitor * > * Jobs * をクリックします。

