---
permalink: protect-azure/clone-sql-database-backups.html 
sidebar: sidebar 
keywords: SnapCenter Plug-in for SQL Server Database, clone, database, backups 
summary: SnapCenter を使用してバックアップをクローニングすることができます。 
---
= SQL Serverデータベースバックアップのクローニング
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenterを使用すると、データベースのバックアップを使用してSQLデータベースをクローニングできます。作成されるクローンはシッククローンで、親容量プールに作成されます。

.タスクの内容
クローンのターゲットインスタンスに、SMB ADActive Directoryドメインに属し、ファイル権限を適切に設定する権限があるActive Directoryユーザが設定されていることを確認する必要があります。クレデンシャルはSnapCenterでインスタンスレベルで設定する必要があります。

ターゲットインスタンスのSQL認証は、SMB構成ではサポートされません。ターゲットインスタンスは、必要な権限を持つActive Directoryユーザを使用してSnapCenterで設定する必要があります。

SnapCenter Plug-inサービスのサービスアカウントがActive Directoryユーザでない場合は、クローンの実行中にソースボリュームを偽装して必要な処理を実行できるように、ソースボリュームを完全に制御できるユーザが必要です。

.手順
. 左側のナビゲーションペインで、*[リソース]*を選択し、リストから適切なプラグインを選択します。
. [ リソース ] ページで、 [ * 表示 ] リストから [ * データベース * ] または [ * リソースグループ * ] を選択します。
. データベースまたはリソースグループを選択します。
. [コピーの管理]ビューページで、プライマリストレージシステムからバックアップを選択します。
. バックアップを選択し、**を選択しますimage:../media/clone_icon.gif["クローンアイコン"]。
. [クローンオプション]*ページで、必要なすべての詳細を指定します。
. [ 場所 ] ページで、クローンを作成するストレージの場所を選択します。
+
SQL ServerデータベースANFボリュームが手動のQoS容量プールに設定されている場合は、クローンボリュームのQoSを指定します。

+
クローンボリュームにQoSが指定されていない場合は、ソースボリュームのQoSが使用されます。自動QoS容量プールを使用している場合、指定したQoS値は無視されます。

. Logs ページで、次のいずれかのオプションを選択します。
+
.. ログなしでフルバックアップのみをクローニングする場合は、*[なし]*を選択します。
.. フルバックアップ後の日付のログバックアップをすべてクローニングする場合は、*[すべてのログバックアップ]*を選択します。
.. 選択した日付のバックアップログまでに作成されたバックアップログに基づいてデータベースをクローニングする場合は、*[By log backups until *]を選択します。
.. 指定した日時以降にトランザクションログを適用しない場合は、*[By specific date until]*を選択します。


. [Script *]ページで、クローニング処理の前後に実行するプリスクリプトまたはポストスクリプトのスクリプトタイムアウト、パス、および引数を入力します。
. [*Notification] ページの [*Email preference*] ドロップダウンリストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、*[終了]*を選択します。
. 処理の進捗状況を監視するために、*[監視]*>*[ジョブ]*を選択します。




== クローンライフサイクルの実行

SnapCenter を使用すると、リソースグループまたはデータベースからクローンを作成できます。クローニングはオンデマンドで実行することも、リソースグループまたはデータベースに対して定期的なクローニング処理をスケジュール設定することもできます。バックアップを定期的にクローニングすると、クローンを使用してアプリケーションの開発、データの取り込み、またはデータのリカバリを行うことができます。

.手順
. 左側のナビゲーションペインで、*[リソース]*を選択し、リストから適切なプラグインを選択します。
. [ リソース ] ページで、 [ * 表示 ] リストから [ * データベース * ] または [ * リソースグループ * ] を選択します。
. データベースまたはリソースグループを選択します。
. [コピーの管理]ビューページで、プライマリストレージシステムからバックアップを選択します。
. バックアップを選択し、**を選択しますimage:../media/clone_icon.gif["クローンアイコン"]。
. [クローンオプション]*ページで、必要なすべての詳細を指定します。
. [ 場所 ] ページで、クローンを作成するストレージの場所を選択します。
+
SQL ServerデータベースANFボリュームが手動のQoS容量プールに設定されている場合は、クローンボリュームのQoSを指定します。

+
クローンボリュームにQoSが指定されていない場合は、ソースボリュームのQoSが使用されます。自動QoS容量プールを使用している場合、指定したQoS値は無視されます。

. [Script *]ページで、クローニング処理の前後に実行するプリスクリプトまたはポストスクリプトのスクリプトタイムアウト、パス、および引数を入力します。
. [ スケジュール ] ページで、次のいずれかの操作を実行します。
+
** クローニングジョブをすぐに実行する場合は、「 * Run Now * 」を選択します。
** クローニング処理の実行頻度、クローニングスケジュールを開始するタイミング、クローニング処理を実行する曜日、スケジュールの有効期限、およびスケジュールの有効期限が切れたあとにクローンを削除するかどうかを指定する場合は、*[スケジュールの設定]*を選択します。


. [*Notification] ページの [*Email preference*] ドロップダウンリストから、電子メールを送信するシナリオを選択します。
. 概要を確認し、*[終了]*を選択します。
. 処理の進捗状況を監視するために、*[監視]*>*[ジョブ]*を選択します。

