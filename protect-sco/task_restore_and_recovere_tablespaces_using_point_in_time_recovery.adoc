---
permalink: protect-sco/task_restore_and_recovere_tablespaces_using_point_in_time_recovery.html 
sidebar: sidebar 
keywords: restore, PITR, point-in-time recovery, RMAN, tablespaces 
summary: データベース内の他の表領域に影響を与えることなく、破損または削除された表領域のサブセットをリストアできます。SnapCenter は、 RMAN を使用して表領域のポイントインタイムリカバリ（ PITR ）を実行します。 
---
= ポイントインタイムリカバリを使用した表領域のリストアとリカバリ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
データベース内の他の表領域に影響を与えることなく、破損または削除された表領域のサブセットをリストアできます。SnapCenterは、RMANを使用して表領域のポイントインタイムリカバリ（PITR）を実行します。

* 始める前に *

* 表領域のPITRを実行するために必要なバックアップをカタログ化してマウントする必要があります。
* root以外のユーザとしてプラグインをインストールした場合は、実行権限をプリスクリプトディレクトリとポストスクリプトディレクトリに手動で割り当てる必要があります。


* このタスクについて *

PITR処理中、RMANは指定された補助デスティネーションに補助インスタンスを作成します。補助デスティネーションには、マウントポイントまたはASMディスクグループを指定できます。マウントされた場所に十分なスペースがある場合は、専用のマウントポイントの代わりにいずれかのマウントされた場所を再利用できます。

日時またはSCNを指定すると、ソースデータベースに表領域がリストアされます。

ASM、NFS、SAN環境にある複数の表領域を選択してリストアできます。たとえば、表領域TS2とTS3がNFS上にあり、TS4がSAN上にある場合、1回のPITR処理ですべての表領域をリストアできます。


NOTE: RACセットアップでは、RACの任意のノードから表領域のPITRを実行できます。

* 手順 *

. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. [ リソース ] ページで、 [ * 表示 ] リストから [ * データベース * ] または [ * リソースグループ * ] を選択します。
. データベースの詳細ビューまたはリソースグループの詳細ビューで、タイプが単一インスタンス（マルチテナント）のデータベースを選択します。
+
データベーストポロジページが表示されます。

. Manage Copies （コピーの管理）ビューから、プライマリまたはセカンダリ（ミラーまたはレプリケートされた）ストレージシステムから * Backups （バックアップ） * を選択します。
+
バックアップがカタログ化されていない場合は、バックアップを選択し、 * Catalog * をクリックします。

. カタログ化されたバックアップを選択し、**をクリックしますimage:../media/restore_icon.gif["リストアアイコン"]。
. Restore Scope ページで、次のタスクを実行します。
+
.. Real Application Clusters（RAC）環境でデータベースのバックアップを選択した場合は、RACノードを選択します。
.. [ * 表領域 * ] を選択し、リストアする表領域を指定します。
+

NOTE: SYSAUX、SYSTEM、およびUNDOテーブルスペースではPITRを実行できません。

.. リストアとリカバリに必要な場合は、「 * データベースの状態を変更」を選択して、データベースの状態をリストアとリカバリ処理の実行に必要な状態に変更します。


. [Recovery Scope]ページで、次のいずれかを実行します。
+
** 特定の System Change Number （ SCN ）までリカバリする場合は、「 * Until SCN * 」を選択し、 SCN と補助のデスティネーションを指定します。
** 特定の日時にリカバリする場合は、 [ * 日付と時刻 * （ * Date and Time * ） ] を選択して、日時と補助的な保存先を指定します。
+
SnapCenterは、指定したSCNまたは選択した日時に基づいて、PITRの実行に必要なデータバックアップとログバックアップの最適な数を特定し、マウントしてカタログ化します。



. PreOps ページで、リストア処理の前に実行するプリスクリプトのパスと引数を入力します。
+
プリスクリプトは、/var/opt/snapcenter/spl/scriptsパスまたはこのパス内の任意のフォルダに保存してください。デフォルトでは、/var/opt/snapcenter/spl/scriptsパスが入力されています。スクリプトを保存するフォルダをこのパス内に作成してある場合は、パス内のそれらのフォルダを指定する必要があります。

+
スクリプトのタイムアウト値を指定することもできます。デフォルト値は60秒です。

+
SnapCenterでは、プリスクリプトとポストスクリプトの実行時に、事前定義された環境変数を使用できます。 link:../protect-sco/predefined-environment-variables-prescript-postscript-restore.html["詳細"^]

. PostOps ページで、次の手順を実行します。
+
.. リストア処理のあとに実行するポストスクリプトのパスと引数を入力します。
+

NOTE: リストア処理が失敗した場合、ポストスクリプトは実行されず、クリーンアップアクティビティが直接トリガーされます。

.. リカバリ後にデータベースを開く場合は、このチェックボックスを選択します。


. [ 通知 ] ページの [ 電子メールの設定 *] ドロップダウンリストから、電子メール通知を送信するシナリオを選択します。
. 概要を確認し、 [ 完了 ] をクリックします。
. 操作の進行状況を監視するには、 * Monitor * > * Jobs * をクリックします。

