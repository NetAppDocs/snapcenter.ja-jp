---
permalink: protect-sco/task_restore_and_recover_pluggable_database_using_point_in_time_recovery.html 
sidebar: sidebar 
keywords: PDB, pluggable database, restore, CDB, PITR, point-in-time recovery, RMAN 
summary: コンテナデータベース（ CDB ）内の他の PDB に影響を与えることなく、破損または破棄された Pluggable Database （ PDB ）をリストアおよびリカバリできます。SnapCenter は、 RMAN を使用して PDB のポイントインタイムリカバリ（ PITR ）を実行します。 
---
= ポイントインタイムリカバリを使用して、プラグイン可能なデータベースをリストアおよびリカバリします
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
コンテナデータベース（ CDB ）内の他の PDB に影響を与えることなく、破損または破棄された Pluggable Database （ PDB ）をリストアおよびリカバリできます。SnapCenter は、 RMAN を使用して PDB のポイントインタイムリカバリ（ PITR ）を実行します。

* 必要なもの *

PDB の PITR を実行するために必要なバックアップは、カタログ化してマウントする必要があります。


NOTE: RAC セットアップでは、 RAC セットアップのすべてのノードの PDB を手動で閉じます（状態を mounted に変更します）。

* このタスクについて *

PITR 操作中に、 RMAN は指定された補助宛先に補助インスタンスを作成します。補助デスティネーションは、マウントポイントまたは ASM ディスクグループです。マウント先に十分なスペースがある場合は、専用のマウントポイントではなく、マウントされた場所の 1 つを再利用できます。

PDB の PITR を実行するには、日時または SCN を指定する必要があります。RMAN は、データファイルを含む読み取り / 書き込み、読み取り専用、またはドロップされた PDB をリカバリできます。

リストアとリカバリが可能なのは次の場合だけです。

* 一度に 1 つの PDB
* PDB 内の 1 つの表領域
* 同じ PDB の複数の表領域



NOTE: RAC セットアップでは、 RAC の任意のノードから表領域の PITR を実行できます。

* 手順 *

. 左側のナビゲーションペインで、 * リソース * をクリックし、リストから適切なプラグインを選択します。
. [ リソース ] ページで、 [ * 表示 ] リストから [ * データベース * ] または [ * リソースグループ * ] を選択します。
. データベースの詳細ビューまたはリソースグループの詳細ビューで、タイプがシングルインスタンス（マルチテナント）のデータベースを選択します。
+
データベーストポロジのページが表示されます。

. Manage Copies （コピーの管理）ビューから、プライマリまたはセカンダリ（ミラーまたはレプリケートされた）ストレージシステムから * Backups （バックアップ） * を選択します。
+
バックアップがカタログ化されていない場合は、バックアップを選択し、 * Catalog * をクリックします。

. カタログ化されたバックアップを選択し、 * をクリックしますimage:../media/restore_icon.gif["リストアアイコン"]*
. Restore Scope ページで、次のタスクを実行します。
+
.. Real Application Clusters （ RAC ）環境でデータベースのバックアップを選択した場合は、 RAC ノードを選択します。
.. PDB 内の PDB または表領域をリストアするかどうかに応じて、次のいずれかの操作を実行します。
+
|===


| 状況 | 手順 


 a| 
PDB をリストアします
 a| 
... Pluggable Database （ PDB ） * を選択します。
... リストアする PDB を指定します。
+

NOTE: PDB$SEED データベースで PITR を実行することはできません。





 a| 
PDB のリストア表領域
 a| 
... Pluggable Database （ PDB ） tablespaces * を選択します。
... PDB を指定します。
... リストアする表領域を 1 つまたは複数指定します。
+

NOTE: SYSAUX ' システム ' および UNDO の各テーブルスペースでは 'PITR を実行できません



|===
.. リストアとリカバリに必要な場合は、「 * データベースの状態を変更」を選択して、データベースの状態をリストアとリカバリ処理の実行に必要な状態に変更します。


. Recovery Scope ページで、次のいずれかを実行します。
+
** 特定の System Change Number （ SCN ）までリカバリする場合は、「 * Until SCN * 」を選択し、 SCN と補助のデスティネーションを指定します。
** 特定の日時にリカバリする場合は、 [ * 日付と時刻 * （ * Date and Time * ） ] を選択して、日時と補助的な保存先を指定します。SCN または日付と時刻を指定すると、 SnapCenter には、 PITR の実行に必要なバックアップのうち、カタログ化されておらず、マウントされていないバックアップが表示されます。PITR に必要なログバックアップは、手動でマウントしてカタログ化する必要があります。


. PreOps ページで、リストア処理の前に実行するプリスクリプトのパスと引数を入力します。
+
プリスクリプトは、 /var/opt/snapcenter /spl/scripts パスまたはこのパス内の任意のフォルダに保存する必要があります。デフォルトでは、 /var/opt/snapcenter /spl/scripts パスが読み込まれます。スクリプトを保存するフォルダをこのパス内に作成してある場合は、パス内のそれらのフォルダを指定する必要があります。

+
スクリプトのタイムアウト値を指定することもできます。デフォルト値は 60 秒です。

+
SnapCenter では、プリスクリプトとポストスクリプトを実行する際に、事前定義された環境変数を使用できます。 link:../protect-sco/predefined-environment-variables-prescript-postscript-restore.html["詳細はこちら。"^]

. PostOps ページで、次の手順を実行します。
+
.. リストア処理のあとに実行するポストスクリプトのパスと引数を入力します。
+

NOTE: リストア処理が失敗すると、ポストスクリプトは実行されず、クリーンアップアクティビティが直接トリガーされます。

.. リカバリ後にデータベースを開く場合は、チェックボックスを選択します。
+
RAC セットアップでは、データベースがリカバリされたノードでのみ PDB が開きます。RAC セットアップの他のすべてのノードで、リカバリされた PDB を手動で開く必要があります。



. [ 通知 ] ページの [ 電子メールの設定 *] ドロップダウンリストから、電子メール通知を送信するシナリオを選択します。
. 概要を確認し、 [ 完了 ] をクリックします。
. 操作の進行状況を監視するには、 * Monitor * > * Jobs * をクリックします。

